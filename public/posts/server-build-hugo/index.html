<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=你在世纪大道东门 name=description><link href=/main.css rel=stylesheet><script src=/js/theme-toggle.js></script><script>document.documentElement.classList.toggle('dark-mode', 
            localStorage.getItem('theme') === 'dark' || 
            (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)
        );</script><title>世纪大道</title><link href=/favicon.ico rel=icon type=image/x-icon><script defer src=/js/posts/copy2clipboard.js></script><body><header><nav><a href=https://blog.0pt.icu/atom.xml>/rss</a><a href=https://blog.0pt.icu>/home</a><a href=https://blog.0pt.icu/posts>/posts</a><a href=https://blog.0pt.icu/links>/links</a><a href=https://blog.0pt.icu/about>/about</a></nav><div class=theme-toggle-container><input aria-label=theme-toggle class=checkbox id=checkbox type=checkbox><label class=checkbox-label for=checkbox><span class=ball></span></label></div></header><div><h1>基于Arch Linux搭建hugo博客</h1><span>2023-11-17</span><div class=toc><ul><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#ji-yu-arch-linuxda-jian-hugobo-ke>基于Arch Linux搭建hugo博客</a><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#1-ben-di-da-jian-hugo>1.本地搭建hugo</a><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#2-pei-zhi-git>2.配置git</a><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#3-jiang-ben-di-de-bo-ke-wen-jian-tui-song-dao-githubcang-ku>3.将本地的博客文件推送到github仓库</a><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#4-jiang-wo-men-bo-ke-de-githubcang-ku-yu-tuo-guan-ping-tai-lian-jie>4.将我们博客的github仓库与托管平台连接</a><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#5-tian-jia-yu-ming-xu-yao-ni-you-yu-ming>5.添加域名（需要你有域名）</a><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#6-hou-xu>6.后续</a><li><a href=https://blog.0pt.icu/posts/server-build-hugo/#7-ming-xie>7.鸣谢</a></ul></div><h1 id=ji-yu-arch-linuxda-jian-hugobo-ke>基于Arch Linux搭建hugo博客</h1><p>2023-11-17<h1 id=1-ben-di-da-jian-hugo>1.本地搭建hugo</h1><p>本篇基于的环境是arch linux。<p>没有安装git可以先用包管理器安装git。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>yay -S</span><span> git
</span></code></pre><p>安装go语言：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>yay -S</span><span> go
</span></code></pre><p>安装hugo：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>yay -S</span><span> gohugo-extended-bin
</span></code></pre><p>创建博客文件：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>hugo</span><span> new site myblog
</span></code></pre><p>该操作会创建一个博客文件夹，并在里面生成博客文件<p><code>myblog</code> 可以替换成你想要的博客文件夹的名字。<p>进入<strong>博客文件夹的根目录</strong>里面。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#96b5b4>cd</span><span> myblog
</span></code></pre><p>下载博客主题，这里选用的是<code>stack</code> 主题。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> clone https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack
</span></code></pre><p>将博客主题中的的<code>exampleSite</code> 复制到博客的根目录。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>cp -r</span><span> themes/hugo-theme-stack/exampleSite/* ./
</span></code></pre><p>将博客原来的配置文件<code>hugo.toml</code>删除。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>rm -r</span><span> hugo.toml
</span></code></pre><p>主题中的<code>exampleSite</code>已经给我们提供了一个配置文件<code>config.yaml</code>，接下来我们配置config.yaml文件。可以参考官方文档与其他人的教程来配置。<p><strong>渲染博客</strong><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>hugo
</span></code></pre><p>这个命令会将你更新的文章与配置文件，还有修改的前端文件，在public文件夹里面生成相应的网页文件。最后别人看到的博客其实就是public里面的文件。<p><strong>预览博客</strong><pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>hugo</span><span> server
</span></code></pre><p><img alt src=https://img.0pt.icu/learn/build-hugo/1.png><p>现在，打开本地浏览器打开<code>http://localhost:1313</code> ，即可看见你的博客。<p><img alt src=https://img.0pt.icu/learn/build-hugo/2.png><p>至此本地搭建hugo完成。<p>在本地更新的文章与配置文件，还有修改的前端文件，之后查看效果。确认无误后，运行<code>hugo</code> 命令渲染生成网页文件后，我们可以开始把博客推送到托管平台上面。<h1 id=2-pei-zhi-git>2.配置git</h1><p>先注册一个<a href=https://github.com>github</a><p>生成密钥，在本地运行：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>ssh-keygen -t</span><span> rsa
</span></code></pre><p>然后一路回车。<p><img alt src=https://img.0pt.icu/learn/build-hugo/5.png><p>然后根据他的默认路径（对于我来说是<code>/home/opeth/.shh</code>）,找到<code>id_rsa.pub</code><p>文件。<p><img alt src=https://img.0pt.icu/learn/build-hugo/6.png><p>打开id_rsa.pub文件，将其中的内容全部复制。<p>来到<a href=https://github.com/>github</a>页面登录后。<p><img alt src=https://img.0pt.icu/learn/build-hugo/7.png><p>点击头像。<p><img alt src=https://img.0pt.icu/learn/build-hugo/8.png><p>点击设置。<p><img alt src=https://img.0pt.icu/learn/build-hugo/9.png><p>点击<code>SSH and GPG keys</code> 。<p><img alt src=https://img.0pt.icu/learn/build-hugo/10.png><p>点击新增SSH密钥。<p><img alt src=https://img.0pt.icu/learn/build-hugo/11.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/12.png><p>依次点击。创建一个新的仓库。<p><img alt src=https://img.0pt.icu/learn/build-hugo/13.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/14.png><p>创建成功。<p><img alt src=https://img.0pt.icu/learn/build-hugo/15.png><p>点击这里的SSH。<p><img alt src=https://img.0pt.icu/learn/build-hugo/16.png><p>这里的这一串链接既为你的<code>ssh连接命令</code> 。先记下来备用。<p>现在转战本地。<p>打开终端，运行：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> config</span><span style=color:#bf616a> --global</span><span> user.name yourName
</span><span style=color:#bf616a>git</span><span> config</span><span style=color:#bf616a> --global</span><span> user.email yourEmail
</span></code></pre><p>请将<code>yourName</code>和<code>yourEmail</code> 替换成你自己的github用户名和注册github的邮箱。<p>进入你本地的博客文件夹的根目录。<p>(不知道博客文件夹的根目录是什么的。请从上文中的 1.本地部署hugo的 创建博客文件 到 进入<strong>博客文件夹的根目录</strong> 部分里面自行理解推断。)<p>初始化博客文件夹为git仓库。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> init
</span></code></pre><p><img alt src=https://img.0pt.icu/learn/build-hugo/3.png><p>将本地的<code>git</code>分支从<code>master</code>分支转变为<code>main</code>分支。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> branch</span><span style=color:#bf616a> -m</span><span> master main
</span></code></pre><p><img alt src=https://img.0pt.icu/learn/build-hugo/4.png><p>将本地的git仓库与我们刚才在github上面创建的那个仓库连接起来。<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> remote add myblog git@github.com:0pt12/myblog.git
</span></code></pre><p>这里的<code>myblog</code> 是刚才我们在github上面创建的仓库的名字，请替换成你自己创建的仓库名字。<p>这里的<code>git@github.com:0pt12/myblog.git</code> 是刚才我们在github上面创建的仓库的<code>ssh连接命令</code>，也请替换成你自己的仓库的<code>ssh连接命令</code>。<p>至此，配置git完成。<h1 id=3-jiang-ben-di-de-bo-ke-wen-jian-tui-song-dao-githubcang-ku>3.将本地的博客文件推送到github仓库</h1><p>操作都在本地的博客文件夹的根目录下完成。<p>一般来说，先在本地对博客进行更改，之后先运行：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>hugo
</span></code></pre><p>将博客的更改内容渲染生成网页文件到public文件夹里面。<p><img alt src=https://img.0pt.icu/learn/build-hugo/17.png><p>然后执行：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> add .
</span><span style=color:#65737e>#注意后面有一个点
</span><span style=color:#bf616a>git</span><span> commit</span><span style=color:#bf616a> -m </span><span>"</span><span style=color:#a3be8c>Your commit message</span><span>"
</span><span style=color:#65737e>#这里引号里面的内容相当于注释，可以写这次更新的内容
</span><span style=color:#bf616a>git</span><span> push</span><span style=color:#bf616a> -f</span><span> myblog main
</span><span style=color:#65737e># myblog 是我的刚才创建的github上面仓库的名字，请自行替换
</span></code></pre><p><img alt src=https://img.0pt.icu/learn/build-hugo/18.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/19.png><p>推送完成，我们去github上面的这个仓库看看。<p><img alt src=https://img.0pt.icu/learn/build-hugo/20.png><p>刚才空空如也的仓库里面出现了我们本地推送上去的东西。<h1 id=4-jiang-wo-men-bo-ke-de-githubcang-ku-yu-tuo-guan-ping-tai-lian-jie>4.将我们博客的github仓库与托管平台连接</h1><p>这里，我们选用的托管平台是<a href=https://www.4everland.org/>4everland</a><p>点开这个连接<a href=https://www.4everland.org/>4everland</a><p><img alt src=https://img.0pt.icu/learn/build-hugo/21.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/22.png><p>这是用你的github账号去注册。<p><img alt src=https://img.0pt.icu/learn/build-hugo/23.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/24.png><p>这里刚注册就叫你花钱升级，直接给他放弃。<p><img alt src=https://img.0pt.icu/learn/build-hugo/25.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/26.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/27.png><p>然后4everland就可以识别你的github里面的仓库了。选择我们刚才创建的博客的仓库，点击导入。<p><img alt src=https://img.0pt.icu/learn/build-hugo/28.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/29.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/30.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/31.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/32.png><p>等待部署完成。<p><img alt src=https://img.0pt.icu/learn/build-hugo/33.png><p>这里提示我们部署成功了。<p><img alt src=https://img.0pt.icu/learn/build-hugo/34.png><p>点击访问详情页。<p><img alt src=https://img.0pt.icu/learn/build-hugo/35.png><h1 id=5-tian-jia-yu-ming-xu-yao-ni-you-yu-ming>5.添加域名（需要你有域名）</h1><p><img alt src=https://img.0pt.icu/learn/build-hugo/36.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/37.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/38.png><p>这里提示我们域名未生效，需要添加一下CNAME记录，目标也给出了。<p>转到我们托管直接域名的平台，添加一个CNAME记录。我使用的是Cloudflare，其他平台也同理。<p><img alt src=https://img.0pt.icu/learn/build-hugo/39.png><p><img alt src=https://img.0pt.icu/learn/build-hugo/40.png><p>添加完成，返回4everland。<p><img alt src=https://img.0pt.icu/learn/build-hugo/41.png><p>等待一会。<p><img alt src=https://img.0pt.icu/learn/build-hugo/42.png><p>这里域名也可以了，现在可以通过访问<a href=https://myblog.0pt.icu%E6%9D%A5%E8%AE%BF%E9%97%AE%E5%8D%9A%E5%AE%A2%E4%BA%86%E3%80%82>https://myblog.0pt.icu来访问博客了。</a><p><a href=https://blog.0pt.icu/posts/server-build-hugo/%5Bhttps://myblog.0pt.icu%5D(https://myblog.0pt.icu)>myblog</a><p><img alt src=https://img.0pt.icu/learn/build-hugo/43.png><p>成功！<h1 id=6-hou-xu>6.后续</h1><p>之后你每次更新博客，现在本地更改，通过：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>hugo</span><span> server</span><span style=color:#bf616a> -D
</span></code></pre><p>访问 <a href=http://localhost:1313>http://localhost:1313</a> 查看效果。<p>然后运行：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>hugo
</span></code></pre><p>渲染成网页文件到public文件夹。<p>再通过：<pre class=language-bash data-lang=bash style=color:#c0c5ce;background-color:#2b303b><code class=language-bash data-lang=bash><span style=color:#bf616a>git</span><span> add .
</span><span style=color:#bf616a>git</span><span> commit</span><span style=color:#bf616a> -m </span><span>"</span><span style=color:#a3be8c>Your commit message</span><span>"
</span><span style=color:#bf616a>git</span><span> push</span><span style=color:#bf616a> -f</span><span> myblog main
</span></code></pre><p>将本地更新内容推送到github仓库上。<p>当github仓库发生变化时，托管平台会自动检测到变化，并自动重新部署，将更新内容同步到网络上，让其他人可以看到。<h1 id=7-ming-xie>7.鸣谢</h1><p>感谢<a href=https://yon.im>Yon Zilch</a> 提供的方案。<p>感谢<a href=https://purkit.lockey.icu/>Purkit</a> 提供的[教程](<a href=https://purkit.lockey.icu/2022/11/11/hello-hugo/>Ubuntu平台下使用Vercel+Hugo搭建静态博客 | Purkit's Blog</a>) 。</div>